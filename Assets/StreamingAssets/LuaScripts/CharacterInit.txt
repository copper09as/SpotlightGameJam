
-- 初始化角色跳跃数据
function CharacterInit(entity)
    entity.dataTable = {
        speed = 10,                   -- 水平移动速度（可选）
        gravity = 10,                 -- 重力加速度
        baseJumpHeight = 2,           -- 基础跳跃高度（初次跳跃力来源）
        maxJumpHeight = 5,            -- 长按空格能达到的最大高度
        jumpForce = 0,                -- 初始施加的跳跃力
        isJumping = false,            -- 是否处于跳跃上升阶段
        isJumpFalling = false,        -- 是否处于下落阶段
        jumpCut = true,              -- 是否短按跳跃提前下降
        jumpHangTimeThreshold = 1.0,  -- 接近最高点时悬停阈值
        jumpCutGravityMult = 2.0,     -- 短按空格增加重力倍率
        fallGravityMult = 1.0,        -- 正常下落重力倍率
        startY = 0,                    -- 记录起跳位置
		currentHeight = 0,				--给lua用的
		jumpRate = 2,				 --跳跃倍率(过小会导致无法抵达最高高度)
		rayLen = 0.1					--检测射线长度
	}

    local data = entity.dataTable
    -- 计算初始跳跃力: v = sqrt(2 * g * h)
    data.jumpForce = math.sqrt(2 * data.gravity * data.baseJumpHeight)
end