-- 初始化角色跳跃数据
function CharacterInit(entity)
    local data = entity.dataTable or {}

    data.speed = 10                    -- 水平移动速度（可选）
    data.gravity = 10                  -- 重力加速度
    data.baseJumpHeight = 2            -- 基础跳跃高度（初次跳跃力来源）
    data.maxJumpHeight = 5             -- 长按空格能达到的最大高度
    data.jumpForce = 0                 -- 初始施加的跳跃力
    data.isJumping = false             -- 是否处于跳跃上升阶段
    data.isJumpFalling = false         -- 是否处于下落阶段
    data.jumpCut = true               -- 是否短按跳跃提前下降
    data.jumpHangTimeThreshold = 1.0   -- 接近最高点时悬停阈值
    data.jumpCutGravityMult = 2.0      -- 短按空格增加重力倍率
    data.fallGravityMult = 1.0         -- 正常下落重力倍率
    data.startY = 0                    -- 记录起跳位置
    data.currentHeight = 0            -- 给 lua 用的
    data.jumpRate = 2                 -- 跳跃倍率（过小会导致无法抵达最高高度）
    data.rayLen = 0.1                 -- 检测射线长度

    -- 计算初始跳跃力: v = sqrt(2 * g * h)
    data.jumpForce = math.sqrt(2 * data.gravity * data.baseJumpHeight)

    entity.dataTable = data
end