function CharacterScaleController(entity)
    local data = entity.dataTable
    local minScale = data.minScale

    -- 读取实际世界缩放
    local worldScale = entity.transform.lossyScale
    local localScale = entity.transform.localScale

    if worldScale.x < minScale or worldScale.y < minScale or worldScale.z < minScale then
        local parent = entity.transform.parent
        local parentScale = CS.UnityEngine.Vector3(1, 1, 1)

        if parent ~= nil then
            parentScale = parent.lossyScale
        end

        -- ⚡ 这里我们只设置 localScale，不碰 lossyScale
        entity.transform.localScale = CS.UnityEngine.Vector3(
            minScale / parentScale.x,
            minScale / parentScale.y,
            minScale / parentScale.z
        )
    end
end
