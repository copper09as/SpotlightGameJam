function CharacterScaleController(entity)
    local data = entity.dataTable
    local minScale = data.minScale
    local maxScale = data.maxScale  -- 新增最大缩放值

    local worldScale = entity.transform.lossyScale
    local localScale = entity.transform.localScale

    local tolerance = 0.001

    -- 如果世界缩放小于最小值或大于最大值
    if worldScale.x + tolerance < minScale or worldScale.y + tolerance < minScale or worldScale.z + tolerance < minScale
        or worldScale.x - tolerance > maxScale or worldScale.y - tolerance > maxScale or worldScale.z - tolerance > maxScale then

        local parent = entity.transform.parent
        local parentScale = CS.UnityEngine.Vector3(1, 1, 1)

        if parent ~= nil then
            parentScale = parent.lossyScale
        end

        -- 计算目标世界缩放，夹在 minScale 和 maxScale 之间
        local targetWorldX = math.min(math.max(worldScale.x, minScale), maxScale)
        local targetWorldY = math.min(math.max(worldScale.y, minScale), maxScale)
        local targetWorldZ = math.min(math.max(worldScale.z, minScale), maxScale)

        -- 反算出 localScale
        local newLocalScale = CS.UnityEngine.Vector3(
            targetWorldX / parentScale.x,
            targetWorldY / parentScale.y,
            targetWorldZ / parentScale.z
        )

        entity.transform.localScale = newLocalScale
    end
end
